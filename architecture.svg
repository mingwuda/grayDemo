<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景 -->
  <rect width="800" height="600" fill="#f9f9f9"/>
  
  <!-- 标题 -->
  <text x="400" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">基于ZooKeeper的微服务灰度发布系统架构</text>
  
  <!-- ZooKeeper 中心节点 -->
  <rect x="350" y="80" width="100" height="60" rx="10" fill="#FFA500" stroke="#333" stroke-width="2"/>
  <text x="400" y="115" font-family="Arial" font-size="16" text-anchor="middle" fill="#fff" font-weight="bold">ZooKeeper</text>
  <text x="400" y="135" font-family="Arial" font-size="12" text-anchor="middle" fill="#fff">状态管理中心</text>
  
  <!-- 连接线 - 从ZooKeeper到各组件 -->
  <line x1="400" y1="140" x2="200" y2="200" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="400" y1="140" x2="400" y2="200" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="400" y1="140" x2="600" y2="200" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="400" y1="140" x2="400" y2="350" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  
  <!-- RocketMQ -->
  <rect x="350" y="200" width="100" height="60" rx="10" fill="#4169E1" stroke="#333" stroke-width="2"/>
  <text x="400" y="235" font-family="Arial" font-size="16" text-anchor="middle" fill="#fff" font-weight="bold">RocketMQ</text>
  <text x="400" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#fff">消息队列服务</text>
  
  <!-- Dubbo -->
  <rect x="150" y="200" width="100" height="60" rx="10" fill="#32CD32" stroke="#333" stroke-width="2"/>
  <text x="200" y="235" font-family="Arial" font-size="16" text-anchor="middle" fill="#fff" font-weight="bold">Dubbo</text>
  <text x="200" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#fff">服务治理</text>
  
  <!-- Elastic-Job -->
  <rect x="550" y="200" width="100" height="60" rx="10" fill="#9370DB" stroke="#333" stroke-width="2"/>
  <text x="600" y="235" font-family="Arial" font-size="16" text-anchor="middle" fill="#fff" font-weight="bold">Elastic-Job</text>
  <text x="600" y="255" font-family="Arial" font-size="12" text-anchor="middle" fill="#fff">分布式任务调度</text>
  
  <!-- Nginx -->
  <rect x="350" y="350" width="100" height="60" rx="10" fill="#FF6347" stroke="#333" stroke-width="2"/>
  <text x="400" y="385" font-family="Arial" font-size="16" text-anchor="middle" fill="#fff" font-weight="bold">Nginx</text>
  <text x="400" y="405" font-family="Arial" font-size="12" text-anchor="middle" fill="#fff">负载均衡</text>
  
  <!-- 连接线 - Nginx到Producer -->
  <line x1="350" y1="380" x2="225" y2="450" stroke="#666" stroke-width="2"/>
  <line x1="450" y1="380" x2="575" y2="450" stroke="#666" stroke-width="2"/>
  
  <!-- 连接线 - RocketMQ到Consumer -->
  <line x1="375" y1="230" x2="225" y2="520" stroke="#666" stroke-width="2"/>
  <line x1="425" y1="230" x2="575" y2="520" stroke="#666" stroke-width="2"/>
  
  <!-- 灰度Producer -->
  <rect x="150" y="450" width="150" height="50" rx="10" fill="#87CEFA" stroke="#333" stroke-width="2"/>
  <text x="225" y="480" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">灰度Producer</text>
  <text x="225" y="495" font-family="Arial" font-size="10" text-anchor="middle">NODE_TYPE=GRAY</text>
  
  <!-- 生产Producer -->
  <rect x="500" y="450" width="150" height="50" rx="10" fill="#90EE90" stroke="#333" stroke-width="2"/>
  <text x="575" y="480" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">生产Producer</text>
  <text x="575" y="495" font-family="Arial" font-size="10" text-anchor="middle">NODE_TYPE=PRD</text>
  
  <!-- 灰度Consumer -->
  <rect x="150" y="520" width="150" height="50" rx="10" fill="#87CEFA" stroke="#333" stroke-width="2"/>
  <text x="225" y="550" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">灰度Consumer</text>
  <text x="225" y="565" font-family="Arial" font-size="10" text-anchor="middle">GRAY_CONSUMER_GROUP</text>
  
  <!-- 生产Consumer -->
  <rect x="500" y="520" width="150" height="50" rx="10" fill="#90EE90" stroke="#333" stroke-width="2"/>
  <text x="575" y="550" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">生产Consumer</text>
  <text x="575" y="565" font-family="Arial" font-size="10" text-anchor="middle">PRD_CONSUMER_GROUP</text>
  
  <!-- 状态流转说明 -->
  <rect x="50" y="80" width="200" height="100" rx="5" fill="#f0f0f0" stroke="#ccc" stroke-width="1"/>
  <text x="150" y="100" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">状态流转</text>
  <text x="150" y="120" font-family="Arial" font-size="12" text-anchor="middle">初始状态 → GRAY_ACCESSABLE</text>
  <text x="150" y="140" font-family="Arial" font-size="12" text-anchor="middle">→ PRD_ACCESSABLE → ALL_ACCESSABLE</text>
  <text x="150" y="160" font-family="Arial" font-size="12" text-anchor="middle">全不可用 → 仅灰度 → 仅生产 → 全量可用</text>
  
  <!-- 图例 -->
  <rect x="550" y="80" width="200" height="100" rx="5" fill="#f0f0f0" stroke="#ccc" stroke-width="1"/>
  <text x="650" y="100" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">图例</text>
  <rect x="570" y="115" width="15" height="15" fill="#87CEFA" stroke="#333" stroke-width="1"/>
  <text x="650" y="127" font-family="Arial" font-size="12" text-anchor="start">灰度环境</text>
  <rect x="570" y="135" width="15" height="15" fill="#90EE90" stroke="#333" stroke-width="1"/>
  <text x="650" y="147" font-family="Arial" font-size="12" text-anchor="start">生产环境</text>
  <line x1="570" y1="160" x2="595" y2="160" stroke="#666" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="650" y="165" font-family="Arial" font-size="12" text-anchor="start">状态监听</text>
  <line x1="570" y1="175" x2="595" y2="175" stroke="#666" stroke-width="2"/>
  <text x="650" y="180" font-family="Arial" font-size="12" text-anchor="start">数据流</text>
</svg>